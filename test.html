<!DOCTYPE html>
<html>
<?php require_once '../template/head.php'; ?>

<body class="container">

    <head>
        <title>Lingua_Franca</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

        <link rel='stylesheet' href='https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css'>

        <link type="text/css" rel="stylesheet" href="./build/jodit.min.css">
        <script type="text/javascript" src="./build/jodit.min.js"></script>

        <style>
            body {
                height: 100%;
                margin-top: 2em;
                margin-bottom: 2em;
            }
        </style>
    </head>
    <form action="../backend/insert.php" method="post">
        <div class="form-group text-center mt-4">
            <label class="h2" for="title">Reference Title:</label>
            <input type="text" class="form-control" id="title" name="title" required="required">
        </div>
        <div class=" form-group">
            <textarea id="editor" name="editor"></textarea>
        </div>
        <div class="row mb-2">
            <div class="col-sm-4">
                <div id="category" style="width:400px; height:400px;"> </div>
            </div>
            <div class="col-sm-4">
                <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="publish" name="publish">
                    <label class="custom-control-label" for="publish">Ready to be published</label>
                </div>
            </div>
            <div class="col-sm-4">
                <button type="submit" class="btn pull-right" onclick="validate(event); return false;">Save</button>
            </div>
        </div>
    </form>

    <hr>



    <script>
        var editor = new Jodit('#editor');
        function validate(evt) {
            var text = document.getElementById("editor").value;
            var title = document.getElementById("title").value;
            var category = document.getElementById("category_option").value;
            var publish = $("#publish").is(":checked");;

            if (text.length == 0) {
                alert("Please put some text in there!!!");
            } else {
                $.post("../backend/insert.php", {
                        publish: publish,
                        title: title,
                        editor: text,
                        category: category
                    },
                    function(data, status) {
                        alert("data: " + data + "\nStatus: " + status);
                    });
            }
        }


        function getCategory(){
            $.post("../backend/get_category.php", {    },
            function(data, status) {
                // alert("data: " + data + "\nStatus: " + status);
                document.getElementById("category").innerHTML = data;
            });
        }

        getCategory();
    </script>

</body>

</html>